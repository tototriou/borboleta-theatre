@import "variables";
@import "bootstrap/scss/bootstrap";

// ===== Fonts =====
@font-face {
  font-family: "Catamaran";
  src: url("/fonts/Catamaran/Catamaran-VariableFont_wght.ttf") format("truetype");
  font-display: swap;
}

@font-face {
  font-family: "Sue_Ellen_Francisco";
  src: url("/fonts/Sue_Ellen_Francisco/SueEllenFrancisco-Regular.ttf") format("truetype");
  font-display: swap;
}

@font-face {
  font-family: "Gochi_Hand";
  src: url("/fonts/Gochi_Hand/GochiHand-Regular.ttf") format("truetype");
  font-display: swap;
}

// ===== CSS Variables (pour compatibilité avec les composants existants) =====
:root {
  // Couleurs
  --bg-primary: #{$color-bg-primary};
  --bg-secondary: #{$color-bg-secondary};
  --bg-card: #{$color-bg-card};
  --text-primary: #{$color-text-primary};
  --text-light: #{$color-text-light};
  --accent-gold: #{$color-accent-gold};
  --accent-red: #{$color-accent-red};
  --accent-purple: #{$color-accent-purple};

  // Espacements
  --spacing-sm: #{$spacing-sm};
  --spacing-md: #{$spacing-md};
  --spacing-lg: #{$spacing-lg};
  --spacing-xl: #{$spacing-xl};

  // Tailles
  --navbar-height: #{$navbar-height};
  --page-padding-top: #{$page-padding-top};
  --gap-cards: #{$gap-cards};

  // Bordures
  --border-radius-sm: #{$border-radius-sm};
  --border-radius-md: #{$border-radius-md};
  --border-radius-lg: #{$border-radius-lg};
}

// ===== Focus visible global =====
:focus-visible {
  outline: 3px solid $color-accent-gold;
  outline-offset: 2px;
}

// ===== Base styles =====
html,
body {
  margin: 0;
  padding: 0;
  background-color: $color-bg-primary;
  font-family: $font-primary;
  color: $color-text-primary;
  overflow-x: hidden;
}

h1,
h2 {
  font-family: $font-display;
  font-size: $font-size-5xl;
  font-weight: $font-weight-normal;
  letter-spacing: 3px;
  padding-bottom: $spacing-md;
}

h2 {
  font-size: $font-size-4xl;
}

.text-justify {
  text-align: justify;
}

// ===== Navbar =====
.navbar-dark {
  background-color: $color-bg-secondary;
  padding: $spacing-sm $spacing-xl;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: $z-navbar;
  display: flex;
  justify-content: space-between;
  align-items: center;

  .navbar-brand {
    color: $color-text-light;
    font-family: $font-display;
    font-size: $font-size-xl;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: $spacing-sm;
    z-index: $z-navbar + 1;

    &:hover {
      color: white;
    }
  }

  // Bouton burger (mobile uniquement)
  .navbar-burger {
    display: none;
    flex-direction: column;
    justify-content: center;
    gap: 5px;
    width: 30px;
    height: 30px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    z-index: $z-navbar + 1;

    @media (max-width: $breakpoint-md) {
      display: flex;
    }

    .burger-line {
      width: 100%;
      height: 2px;
      background-color: $color-text-light;
      transition: all $transition-base;
      transform-origin: center;

      &.open:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
      }

      &.open:nth-child(2) {
        opacity: 0;
      }

      &.open:nth-child(3) {
        transform: rotate(-45deg) translate(5px, -5px);
      }
    }
  }

  .navbar-links {
    display: flex;
    gap: $spacing-lg;
    list-style: none;
    margin: 0;
    padding: 0;

    // Mobile: menu déroulant
    @media (max-width: $breakpoint-md) {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: $spacing-xl;
      background-color: $color-bg-secondary;
      transform: translateX(100%);
      transition: transform $transition-slow;

      &.open {
        transform: translateX(0);
      }
    }

    li {
      @media (max-width: $breakpoint-md) {
        text-align: center;
      }
    }

    a {
      color: $color-text-light;
      text-decoration: none;
      font-size: $font-size-sm;
      letter-spacing: 0.5px;
      transition: color $transition-base;

      @media (max-width: $breakpoint-md) {
        font-size: $font-size-2xl;
      }

      &:hover {
        color: white;
        text-decoration: underline;
        text-underline-offset: 4px;
      }

      // Style pour le lien actif
      &[aria-current="page"] {
        color: $color-accent-gold;
        text-decoration: underline;
        text-underline-offset: 4px;
      }
    }
  }
}

// ===== Dividers =====
@for $i from 1 through 7 {
  .trait#{$i * 10}vw {
    width: #{$i * 10}vw;
    height: 0.5px;
    background-color: $color-text-muted;
    margin: $spacing-md 0;
  }

  .trait#{$i * 10}percent {
    width: #{$i * 10}%;
    height: 0.5px;
    background-color: $color-text-muted;
    margin: $spacing-lg 0;
  }
}

// ===== Contenu principal au-dessus des éléments décoratifs =====
#main-content {
  position: relative;
  z-index: $z-content;
}

// ===== Decorative elements =====
.deco-thread {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: $z-decorative;
}

.deco-butterfly {
  position: absolute;
  pointer-events: none;
  z-index: $z-decorative + 1;
  opacity: 0.7;
}

// ===== Content cards =====
.content-card {
  background-color: $color-overlay-light;
  backdrop-filter: blur(4px);
  border-radius: $border-radius-lg;
  padding: $spacing-xl;
  position: relative;
  z-index: $z-content;
}

// ===== Buttons =====
.btn-borboleta {
  background-color: transparent;
  border: 2px solid $color-accent-purple;
  color: $color-accent-purple;
  padding: $spacing-sm $spacing-xl;
  border-radius: $border-radius-sm;
  font-family: $font-primary;
  font-weight: $font-weight-semibold;
  letter-spacing: 1px;
  transition: all $transition-base;
  text-decoration: none;
  display: inline-block;

  &:hover {
    background-color: $color-accent-purple;
    color: white;
  }
}

// ===== Modal base styles =====
dialog {
  border: none;
  border-radius: $border-radius-lg;
  padding: 0;
  max-width: 90vw;
  max-height: 90vh;
  overflow-y: auto;
  background-color: white;

  &::backdrop {
    background-color: $color-overlay-dark;
  }
}

dialog[open] {
  animation: fadeIn $transition-base;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
